"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_copilot-chat_components_Chat_tsx-ui_packages_icon-button-with-tooltip_IconButtonW-1ba5d9"],{84863:(e,t,a)=>{a.d(t,{Y:()=>m});var r=a(21728),o=a(96540),n=a(22069),i=a(74244),s=a(34901),l=a(47397),c=a(44435);function m(e){let t,a,m,d,u,h,p,x,g,f,y=(0,r.c)(26),_=(0,s.Pk)(),b=(0,l.b)(),{currentTopic:j,messages:S,selectedThreadID:v}=_;y[0]!==_?(t=(0,c.W)(_),y[0]=_,y[1]=t):t=y[1];let N=t,C=(0,o.useRef)(null),w=e||C;return y[2]!==b||y[3]!==S.length||y[4]!==N?(a=()=>{N&&S.length>0&&b.showTopicPicker(!1)},m=[N,S.length,b],y[2]=b,y[3]=S.length,y[4]=N,y[5]=a,y[6]=m):(a=y[5],m=y[6]),(0,o.useEffect)(a,m),y[7]!==j||y[8]!==v?(d=()=>{let e=j?(0,n.P)(j)?j.name:String(j.id):null;v&&e&&i.J.setSelectedTopic(v,e)},u=[v,j],y[7]=j,y[8]=v,y[9]=d,y[10]=u):(d=y[9],u=y[10]),(0,o.useEffect)(d,u),y[11]!==w?(h=()=>{let e=window.setTimeout(()=>{w.current?.focus()},1);return()=>{window.clearTimeout(e)}},p=[w],y[11]=w,y[12]=h,y[13]=p):(h=y[12],p=y[13]),(0,o.useEffect)(h,p),y[14]!==b||y[15]!==_.context?.[0]||y[16]!==_.currentRepository?(x=()=>{let e=_.context?.[0]??_.currentRepository;return e&&b.generateSuggestions(e),()=>{b.clearSuggestions()}},y[14]=b,y[15]=_.context?.[0],y[16]=_.currentRepository,y[17]=x):x=y[17],y[18]!==b||y[19]!==_.context||y[20]!==_.currentRepository||y[21]!==_.currentTopic||y[22]!==_.selectedThreadID?(g=[b,_.context,_.currentTopic,_.currentRepository,_.selectedThreadID],y[18]=b,y[19]=_.context,y[20]=_.currentRepository,y[21]=_.currentTopic,y[22]=_.selectedThreadID,y[23]=g):g=y[23],(0,o.useEffect)(x,g),y[24]!==w?(f={textAreaRef:w},y[24]=w,y[25]=f):f=y[25],f}},75718:(e,t,a)=>{a.d(t,{P:()=>l});var r=a(74848),o=a(21728),n=a(95726),i=a(47397);let s={ambientErrorBanner:"AmbientErrorBanner-module__ambientErrorBanner--iXbHt",largeBorderRadius:"AmbientErrorBanner-module__largeBorderRadius--Qk23B",mediumBorderRadius:"AmbientErrorBanner-module__mediumBorderRadius--dREtI"};function l(e){let t,a,l=(0,o.c)(6),{ambientError:c,useLargerBorderRadius:m}=e,d=(0,i.b)(),u=void 0!==m&&m?s.largeBorderRadius:s.mediumBorderRadius,h=`${s.ambientErrorBanner} ${u}`;return l[0]!==d?(t=()=>{d.dismissAmbientError()},l[0]=d,l[1]=t):t=l[1],l[2]!==c.message||l[3]!==h||l[4]!==t?(a=(0,r.jsx)(n.l,{className:h,description:c.message,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:t}),l[2]=c.message,l[3]=h,l[4]=t,l[5]=a):a=l[5],a}try{l.displayName||(l.displayName="AmbientErrorBanner")}catch{}},93934:(e,t,a)=>{a.d(t,{r:()=>eO});var r,o=a(74848),n=a(21728),i=a(96235),s=a(96679),l=a(38621),c=a(5420),m=a(63867),d=a(55847),u=a(39459),h=a(84217),p=a(46309),x=a(47139);let g={"contacts-container":"Contact-module__contacts-container--agbyj","contact-list":"Contact-module__contact-list--rJuRJ","contact-container":"Contact-module__contact-container--hYL0Q","contact-info-container":"Contact-module__contact-info-container--gGPwl"},f={monogram:"Monogram-module__monogram--gRaga"},y=e=>{let t,a=(0,n.c)(2),{initials:r}=e;return a[0]!==r?(t=(0,o.jsx)("div",{className:f.monogram,children:r}),a[0]=r,a[1]=t):t=a[1],t};try{y.displayName||(y.displayName="Monogram")}catch{}let _=e=>{let t,a,r,i,s,l=(0,n.c)(14),{size:c,information:m}=e,d=void 0===c?48:c;return l[0]!==m.avatar_url||l[1]!==m.username||l[2]!==d?(t=m.avatar_url?(0,o.jsx)(u.r,{square:!0,size:d,src:m.avatar_url,alt:m.username||"User avatar"}):(0,o.jsx)(y,{initials:m.username.charAt(0)}),l[0]=m.avatar_url,l[1]=m.username,l[2]=d,l[3]=t):t=l[3],l[4]!==m.username?(a=(0,o.jsx)(h.A,{as:"h2",variant:"small",children:m.username}),l[4]=m.username,l[5]=a):a=l[5],l[6]!==m.rank?(r=(0,o.jsx)(p.B,{direction:"horizontal",wrap:"wrap",children:(0,o.jsx)(x.A,{children:m.rank},m.rank)}),l[6]=m.rank,l[7]=r):r=l[7],l[8]!==a||l[9]!==r?(i=(0,o.jsxs)("div",{className:g["contact-info-container"],children:[a,r]}),l[8]=a,l[9]=r,l[10]=i):i=l[10],l[11]!==t||l[12]!==i?(s=(0,o.jsxs)("div",{className:g["contact-container"],children:[t,i]}),l[11]=t,l[12]=i,l[13]=s):s=l[13],s},b=e=>{let t,a,r,i=(0,n.c)(5),{contacts:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(h.A,{as:"h1",variant:"medium",children:"Who to talk to"}),i[0]=t):t=i[0],i[1]!==s?(a=s?.map(j),i[1]=s,i[2]=a):a=i[2],i[3]!==a?(r=(0,o.jsxs)("div",{className:g["contacts-container"],children:[t,(0,o.jsx)("div",{className:g["contact-list"],children:a})]}),i[3]=a,i[4]=r):r=i[4],r};try{_.displayName||(_.displayName="Contact")}catch{}try{b.displayName||(b.displayName="ContactList")}catch{}function j(e){return(0,o.jsx)(_,{information:e},e.id)}let S={"spinner-container":"CopilotMetadata-module__spinner-container--RKoek","tab-container":"CopilotMetadata-module__tab-container--DMNby",muted:"CopilotMetadata-module__muted--rz00u","metadata-container":"CopilotMetadata-module__metadata-container--oWP34","referrer-button":"CopilotMetadata-module__referrer-button--FJeFp"};var v=a(879),N=a(60039),C=a(96540);let w=({setLoading:e,issueNumber:t,makeCAPIRequest:a,fileContext:r})=>{let[o,n]=(0,C.useState)([]),{repoOwner:i,repoName:s,ref:l,path:c}=r??{},m=(0,C.useCallback)(async()=>{try{if(!r)return"";let e=await (0,N.lS)(`/${i}/${s}/collaborator_prompt/${c}?ref=${l}${t?`&issue=${t}`:""}`);if(!e.ok)throw Error("Something went wrong");let o=await e.text(),n={messages:[{role:"user",content:o}],model:"gpt-4o-mini",stream:!1,response_format:{type:"json_schema",json_schema:{name:"Collaborators",description:"List of metadata objects for the top collaborators",strict:!0,schema:{type:"object",additionalProperties:!1,properties:{collaborators:{type:"array",items:{type:"object",additionalProperties:!1,properties:{id:{type:"integer",description:"The collaborator's GitHub user ID."},username:{type:"string",description:"The collaborator's GitHub handle."},avatar_url:{type:"string",description:"The URL of the collaborator's GitHub user avatar."},rank:{type:"string",description:"The rank assignment of the collaborator."},explanation:{type:"string",description:"A brief 1-2 sentence description of the rank assignment."}},required:["id","username","avatar_url","rank","explanation"]}}},required:["collaborators"]}},temperature:0}},m=new v.J([]),d=await m.getAuthToken(),u=await a({basePath:"https://api.githubcopilot.com",body:n,path:"/chat/completions",method:"POST",streamingResponse:!1,authToken:d,integrationId:"copilot-directory"});if(!u.ok)throw Error("Something went wrong");let h=await u.json();return h.choices[0]?.message?.content}catch{throw Error("Something went wrong")}},[]);return(0,C.useEffect)(()=>{o?.length||m().then(t=>{e(!1),n(JSON.parse(t)?.collaborators)},()=>{e(!1)})},[]),{collaborators:o,getCollaborators:m}},A=e=>{let t,a,r,u,h,p,x,g,f,y,_,j,v,N,C,A=(0,n.c)(44),{currentTab:k,setCurrentTab:R,loading:T,setLoading:E,makeCAPIRequest:I,fileContext:B}=e,D=void 0===T||T,P=B?.repoOwner,M=B?.repoName;A[0]===Symbol.for("react.memo_cache_sentinel")?(t=new URLSearchParams(s.cg?.location.search).get("issue")||"",A[0]=t):t=A[0];let z=t;A[1]!==P||A[2]!==M?(a=P&&M&&z?(0,i.dRG)({owner:P,repo:M,issueNumber:Number(z)}):void 0,A[1]=P,A[2]=M,A[3]=a):a=A[3];let L=a;A[4]!==B||A[5]!==I||A[6]!==E?(r={fileContext:B,setLoading:E,issueNumber:z,makeCAPIRequest:I},A[4]=B,A[5]=I,A[6]=E,A[7]=r):r=A[7];let{collaborators:W}=w(r);A[8]!==L?(u=()=>{L&&(window.location.href=L)},A[8]=L,A[9]=u):u=A[9];let U=u,$="chat"===k?"page":void 0;A[10]!==R?(h=()=>R("chat"),A[10]=R,A[11]=h):h=A[11],A[12]!==$||A[13]!==h?(p=(0,o.jsx)(c.O.Item,{"aria-current":$,onSelect:h,children:"Chat"}),A[12]=$,A[13]=h,A[14]=p):p=A[14];let F="directory"===k?"page":void 0;A[15]!==W?.length||A[16]!==D||A[17]!==R?(x=()=>{!D&&W?.length&&R("directory")},A[15]=W?.length,A[16]=D,A[17]=R,A[18]=x):x=A[18],A[19]!==W?.length?(g=W?.length?{}:{className:S.muted},A[19]=W?.length,A[20]=g):g=A[20];let G=W?.length||D?"Directory":"Directory unavailable";return A[21]!==g||A[22]!==G?(f=(0,o.jsx)("span",{...g,children:G}),A[21]=g,A[22]=G,A[23]=f):f=A[23],A[24]!==D?(y=D&&(0,o.jsx)("div",{className:S["spinner-container"],children:(0,o.jsx)(m.A,{size:"small"})}),A[24]=D,A[25]=y):y=A[25],A[26]!==f||A[27]!==y?(_=(0,o.jsxs)("div",{className:S["tab-container"],children:[f,y]}),A[26]=f,A[27]=y,A[28]=_):_=A[28],A[29]!==x||A[30]!==_||A[31]!==F?(j=(0,o.jsx)(c.O.Item,{"aria-current":F,onSelect:x,children:_}),A[29]=x,A[30]=_,A[31]=F,A[32]=j):j=A[32],A[33]!==j||A[34]!==p?(v=(0,o.jsxs)(c.O,{"aria-label":"Repository",children:[p,j]}),A[33]=j,A[34]=p,A[35]=v):v=A[35],A[36]!==W||A[37]!==k||A[38]!==L||A[39]!==U?(N="directory"===k&&(0,o.jsxs)("div",{className:S["metadata-container"],children:[(0,o.jsx)("div",{children:(0,o.jsx)(b,{contacts:W})}),L&&(0,o.jsx)("div",{className:S["referrer-button"],children:(0,o.jsx)(d.Q,{variant:"link",leadingVisual:l.ArrowLeftIcon,onClick:U,children:`Return to Issue${z?` ${z}`:""}`})})]}),A[36]=W,A[37]=k,A[38]=L,A[39]=U,A[40]=N):N=A[40],A[41]!==v||A[42]!==N?(C=(0,o.jsxs)("div",{children:[v,N]}),A[41]=v,A[42]=N,A[43]=C):C=A[43],C};try{A.displayName||(A.displayName="CopilotMetadata")}catch{}var k=a(27851),R=a(66871),T=a(38007),E=a(17515),I=a(75177),B=a(52464),D=a(53110),P=a(84863),M=a(59220),z=a(22069),L=a(13468),W=a(99377),U=a(31971),$=a(34901),F=a(47397),G=a(44435),O=a(67522),Q=a(33449),J=a(75718);let H={legalText:"Chat-module__legalText--wsTEU"};var q=a(77191),K=a(99357),Y=a(44669),V=a(40136),X=a(8387),Z=a(15385);let ee={ActionList_Heading:"CopilotSuggestions-module__ActionList_Heading--ArthG"},et=e=>{let t,a,r,i=(0,n.c)(10),{suggestionKind:s}=e,c=(0,$.Pk)(),m=(0,F.b)();i[0]!==m||i[1]!==c?(t=e=>{m.sendChatMessage({thread:(0,G.W)(c),content:e.prompt??e.question,intent:e.intent,modeOverride:e.mode,references:c.currentReferences,topic:c.currentTopic,context:c.context}),(0,T.BI)("copilot_generated_suggestion_click",{intent:e.intent,mode:e.mode,contextType:c.context?.[0]?.type,content:e.question})},i[0]=m,i[1]=c,i[2]=t):t=i[2];let d=t;i[3]!==d?(a=(0,C.memo)(function(e){let{suggestion:t}=e;return(0,o.jsxs)(Z.l.Item,{onSelect:()=>d(t),sx:{mx:0,border:"1px solid",borderColor:"border.default",width:"fit-content"},children:[(0,o.jsx)(Z.l.LeadingVisual,{children:(0,o.jsx)(D.A,{icon:l.PaperAirplaneIcon})}),(0,o.jsxs)("span",{children:[" ",t.question]})]})}),i[3]=d,i[4]=a):a=i[4];let u=a,h="loading"===c.messagesLoading.state||!!c.streamingMessage,{suggestions:p}=c,x=c.currentReferences[0],g=1===c.currentReferences.length&&x?.type==="repository"&&x.id===c.currentRepository?.id,f=!!(!h&&g);return i[5]!==u||i[6]!==f||i[7]!==s||i[8]!==p?(r=f&&p&&p.suggestions?(0,o.jsxs)(Z.l,{className:"copilot-suggestions",sx:{pt:0,pb:3,display:"flex",gap:2,flexDirection:"column"},children:["initial"===s&&(0,o.jsx)(Z.l.Heading,{as:"h2",className:ee.ActionList_Heading,children:function(e){return e?`Ask about the ${e.replace(/-/g," ")}:`:"Ask anything:"}(p.referenceType)}),p?.suggestions.map(e=>(0,o.jsx)(u,{suggestion:e},e.question))]}):null,i[5]=u,i[6]=f,i[7]=s,i[8]=p,i[9]=r):r=i[9],r},ea=(0,C.memo)(et);try{et.displayName||(et.displayName="CopilotSuggestions")}catch{}try{(r=CopilotSuggestion).displayName||(r.displayName="CopilotSuggestion")}catch{}var er=a(25745),eo=a(70066),en=a(31637),ei=a(6020),es=a(10871),el=a(87330);let ec={container:"CustomBanner-module__container--uV55s",expanded:"CustomBanner-module__expanded--fDTFJ",actions:"CustomBanner-module__actions--tUuz0",iconButton:"CustomBanner-module__iconButton--WWgYX",content:"CustomBanner-module__content--xhiU7",icon:"CustomBanner-module__icon--WrRHA"};function em(e){let t,a,r,i,s,c,m,d=(0,n.c)(16),{icon:u,content:h,actions:p,onDismiss:x}=e,g=(0,C.useRef)(null),[f,y]=(0,C.useState)(!1);d[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=g.current;if(!e)return;let t=new ResizeObserver(t=>{for(let a of t)a.target===e&&(a.contentRect.height>40?y(!0):y(!1))});return t.observe(e),()=>{t.disconnect()}},a=[],d[0]=t,d[1]=a):(t=d[0],a=d[1]),(0,C.useEffect)(t,a);let _=`${ec.container} ${f?ec.expanded:""}`;return d[2]!==u?(r=(0,o.jsx)("div",{className:ec.icon,children:u}),d[2]=u,d[3]=r):r=d[3],d[4]!==h?(i=(0,o.jsx)("div",{className:ec.content,children:h}),d[4]=h,d[5]=i):i=d[5],d[6]!==x?(s=x&&(0,o.jsx)(el.K,{className:ec.iconButton,variant:"invisible",icon:l.XIcon,size:"medium","aria-label":"Close",onClick:x}),d[6]=x,d[7]=s):s=d[7],d[8]!==p||d[9]!==s?(c=(0,o.jsxs)("div",{className:ec.actions,children:[p,s]}),d[8]=p,d[9]=s,d[10]=c):c=d[10],d[11]!==_||d[12]!==r||d[13]!==i||d[14]!==c?(m=(0,o.jsxs)("div",{ref:g,className:_,children:[r,i,c]}),d[11]=_,d[12]=r,d[13]=i,d[14]=c,d[15]=m):m=d[15],m}try{em.displayName||(em.displayName="CustomBanner")}catch{}function ed(){let e,t,a,r,i,s=(0,n.c)(7),{resetDate:c}=(0,en.xR)();s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(l.InfoIcon,{}),s[0]=e):e=s[0];let m=e;s[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(ei.s,{children:(0,o.jsx)("h2",{children:"Usage limit reached"})}),s[1]=t):t=s[1],s[2]!==c?(a=(0,o.jsxs)(o.Fragment,{children:[t,"You have reached your free plan limit. It will reset on ",c]}),s[2]=c,s[3]=a):a=s[3];let d=a;s[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(es.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:eu,children:"Upgrade"}),s[4]=r):r=s[4];let u=r;return s[5]!==d?(i=(0,o.jsx)(em,{icon:m,content:d,actions:u}),s[5]=d,s[6]=i):i=s[6],i}function eu(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_LINK_UPGRADE",mode:"assistive"})}try{ed.displayName||(ed.displayName="QuotaExceededBanner")}catch{}var eh=a(34614);let ep={container:"QuotaExceededEmptyState-module__container--ZMWEG",main:"QuotaExceededEmptyState-module__main--g2hJz",hero:"QuotaExceededEmptyState-module__hero--IrY09",copy:"QuotaExceededEmptyState-module__copy--VyrMt",heading:"QuotaExceededEmptyState-module__heading--LzJGU",description:"QuotaExceededEmptyState-module__description--KbMyl",footer:"QuotaExceededEmptyState-module__footer--evZ9_"};function ex(){let e,t,a,r,i,s,l,c,m=(0,n.c)(11),{resetDate:d}=(0,en.xR)();return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("img",{className:ep.hero,src:"/images/modules/copilot-immersive-v1/hero.png",alt:"Hero"}),m[0]=e):e=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)("h2",{className:ep.heading,children:"You\u2019ve reached your free plan limit"}),m[1]=t):t=m[1],m[2]!==d?(a=(0,o.jsxs)("p",{className:ep.description,children:["Your limits will reset on ",d,"."]}),m[2]=d,m[3]=a):a=m[3],m[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(es.z,{as:"a",variant:"primary",href:"https://github.com/features/copilot#pricing",onClick:eg,children:"Upgrade"}),m[4]=r):r=m[4],m[5]!==a?(i=(0,o.jsxs)("div",{className:ep.main,children:[e,(0,o.jsxs)("div",{className:ep.copy,children:[t,a,r]})]}),m[5]=a,m[6]=i):i=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("strong",{children:"Part of an organization?"}),m[7]=s):s=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsxs)("div",{className:ep.footer,children:[s,(0,o.jsxs)("span",{children:["Upgrade to"," ",(0,o.jsx)(eh.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),m[8]=l):l=m[8],m[9]!==i?(c=(0,o.jsxs)("div",{className:ep.container,children:[i,l]}),m[9]=i,m[10]=c):c=m[10],c}function eg(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"assistive"})}try{ex.displayName||(ex.displayName="QuotaExceededEmptyState")}catch{}var ef=a(74244);let ey={container:"QuotaMeterBanner-module__container--QJsKZ"};function e_(){let e,t,a,r,i,s,c,m=(0,n.c)(9),{isLicensedLimited:d,chatQuotaRemaining:u}=(0,en.xR)(),[h,p]=(0,C.useState)(ej);m[0]!==u||m[1]!==d?(e=()=>{if(d&&void 0!==u){let e=ef.J.getMeterBannerFlag();u>0&&u<=10?null===e?(ef.J.setMeterBannerFlag(!0),p(!0)):p(e):(ef.J.removeMeterBannerFlag(),p(!1))}},t=[d,u],m[0]=u,m[1]=d,m[2]=e,m[3]=t):(e=m[2],t=m[3]),(0,C.useEffect)(e,t),m[4]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{ef.J.setMeterBannerFlag(!1),p(!1)},m[4]=a):a=m[4];let x=a;if(!h||void 0===u)return null;m[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(l.InfoIcon,{}),m[5]=r):r=m[5];let g=r;m[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ei.s,{children:(0,o.jsx)("h2",{children:"Usage limit approaching"})}),"You only have a few free responses remaining."]}),m[6]=i):i=m[6];let f=i;m[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)(es.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:eb,children:"Upgrade"}),m[7]=s):s=m[7];let y=s;return m[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)("div",{className:ey.container,children:(0,o.jsx)(em,{icon:g,content:f,actions:y,onDismiss:x})}),m[8]=c):c=m[8],c}function eb(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"assistive"})}function ej(){return ef.J.getMeterBannerFlag()??!1}try{e_.displayName||(e_.displayName="QuotaMeterBanner")}catch{}var eS=a(19139),ev=a(66343);function eN(e){let t,a,r,i=(0,n.c)(4),{mode:s}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(I.A,{sx:{height:"3rem",mb:2,display:"flex",justifyContent:"center"},children:(0,o.jsx)(ev.A,{})}),i[0]=t):t=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(h.A,{as:"h1",sx:{textAlign:"center",fontSize:3,mb:2},children:"Ask Copilot"}),i[1]=a):a=i[1];let l="immersive"===s?5:3;return i[2]!==l?(r=(0,o.jsxs)(o.Fragment,{children:[t,a,(0,o.jsx)(B.A,{as:"p",sx:{textAlign:"center",color:"fg.muted",mb:l,px:3,textWrap:"balance"},children:"Select a repository to get started. Ask questions about your codebase to get answers fast and learn your way around."})]}),i[2]=l,i[3]=r):r=i[3],r}try{eN.displayName||(eN.displayName="ChatWithCopilotHeader")}catch{}function eC(e){let t,a=(0,n.c)(4),{docset:r,size:i}=e,s="organization"===r.ownerType;return a[0]!==r.avatarUrl||a[1]!==i||a[2]!==s?(t=(0,o.jsx)(u.r,{src:r.avatarUrl,square:s,size:i}),a[0]=r.avatarUrl,a[1]=i,a[2]=s,a[3]=t):t=a[3],t}try{eC.displayName||(eC.displayName="KnowledgeBaseAvatar")}catch{}var ew=a(70170),eA=a(9591),ek=a(6612),eR=a(91819),eT=a(99629);function eE(){let e,t,a,r,i,s,c,d,u,h,p,x,g,f,y,_=(0,n.c)(27),b=(0,F.b)(),{mode:j,selectedThreadID:S}=(0,$.Pk)(),[v,N]=(0,C.useState)("");_[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,ew.s)(e=>N(e),400,{start:!1}),_[0]=e):e=_[0];let w=e,{repositories:A,loading:k,resetTopRepoResults:T}=(0,ek.U)(v,!0,4);_[1]!==b||_[2]!==j||_[3]!==T||_[4]!==S?(t=async e=>{if(T(),void 0===e){b.showTopicPicker(!1),b.clearCurrentTopic(),b.clearCurrentReferences(),"immersive"===j&&(0,R.kd)("/copilot"),S&&ef.J.setSelectedTopic(S,null);return}await b.fetchCurrentRepo(Number(e)),b.showTopicPicker(!1)},_[1]=b,_[2]=j,_[3]=T,_[4]=S,_[5]=t):t=_[5];let E=t;e:{if(k){a="Loading repositories";break e}if(0===A.length){a="No repositories found";break e}if(1===A.length){a="1 repository found";break e}a=`${A.length} repositories found`}let D=a;return _[6]===Symbol.for("react.memo_cache_sentinel")?(r={border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:2,display:"flex",flexDirection:"column",mb:3},_[6]=r):r=_[6],_[7]===Symbol.for("react.memo_cache_sentinel")?(i={p:3,pb:0},_[7]=i):i=_[7],_[8]===Symbol.for("react.memo_cache_sentinel")?(s=e=>w(e.target.value),_[8]=s):s=_[8],_[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(I.A,{sx:i,children:(0,o.jsx)(eA.A,{id:eR.uN,leadingVisual:l.SearchIcon,name:"topic-search","aria-label":"Search repositories to chat about",placeholder:"Search repositories to chat about",onChange:s,sx:{width:"100%","input:placeholder-shown":{textOverflow:"ellipsis"}}})}),_[9]=c):c=_[9],_[10]!==D?(d=(0,o.jsx)("div",{role:"status",className:"sr-only",children:D}),_[10]=D,_[11]=d):d=_[11],_[12]!==E||_[13]!==k||_[14]!==A?(u=k?(0,o.jsx)(I.A,{as:"li",sx:{display:"flex",justifyContent:"center",py:2,height:"190px",alignItems:"center"},children:(0,o.jsx)(m.A,{})}):0===A.length?(0,o.jsxs)(Z.l.Item,{disabled:!0,children:[(0,o.jsx)(Z.l.LeadingVisual,{sx:{color:"fg.muted"},children:(0,o.jsx)(l.CircleSlashIcon,{})}),(0,o.jsx)(B.A,{sx:{color:"fg.muted"},children:"No results found"})]}):(0,o.jsx)(o.Fragment,{children:A.length>0&&(0,o.jsxs)(Z.l.Group,{children:[(0,o.jsx)(Z.l.GroupHeading,{as:"h3",children:"Recent repositories"}),A.map(e=>(0,o.jsx)(eT.W,{repo:e,onSelect:E,trailingVisualComponent:(0,o.jsx)(l.ArrowRightIcon,{})},e.nwo))]})}),_[12]=E,_[13]=k,_[14]=A,_[15]=u):u=_[15],_[16]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsx)(Z.l.Divider,{sx:{marginInline:0}}),_[16]=h):h=_[16],_[17]!==E?(p=()=>E(void 0),_[17]=E,_[18]=p):p=_[18],_[19]===Symbol.for("react.memo_cache_sentinel")?(x={"#chat-with-no-context--label":{marginBottom:"0px !important"}},_[19]=x):x=_[19],_[20]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)(Z.l.TrailingVisual,{children:(0,o.jsx)(l.ArrowRightIcon,{})}),_[20]=g):g=_[20],_[21]!==p?(f=(0,o.jsxs)(Z.l.Item,{id:"chat-with-no-context",onSelect:p,sx:x,children:["General purpose chat",g]},"chat-with-no-context"),_[21]=p,_[22]=f):f=_[22],_[23]!==f||_[24]!==d||_[25]!==u?(y=(0,o.jsxs)(I.A,{sx:r,children:[c,(0,o.jsxs)(Z.l,{children:[d,u,h,f]})]}),_[23]=f,_[24]=d,_[25]=u,_[26]=y):y=_[26],y}try{eE.displayName||(eE.displayName="TopicList")}catch{}let eI=()=>{let e,t,a,r,i,s,l,c,m,d=(0,n.c)(17),u=(0,$.Pk)();e:{let t;if(!u.ssoOrganizations){let t;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],d[0]=t):t=d[0],e=t;break e}d[1]!==u.ssoOrganizations?(t=u.ssoOrganizations.map(eM),d[1]=u.ssoOrganizations,d[2]=t):t=d[2],e=t}let h=e;return d[3]===Symbol.for("react.memo_cache_sentinel")?(t={display:"flex",flexDirection:"column",flexGrow:1,height:"100%"},d[3]=t):t=d[3],d[4]===Symbol.for("react.memo_cache_sentinel")?(a={display:"flex",flexDirection:"column",flexGrow:1},d[4]=a):a=d[4],d[5]!==u.mode?(r=(0,o.jsx)(eN,{mode:u.mode}),d[5]=u.mode,d[6]=r):r=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(I.A,{sx:{px:3,"> button":{m:"0 auto"}},children:(0,o.jsx)(eE,{})}),d[7]=i):i=d[7],d[8]===Symbol.for("react.memo_cache_sentinel")?(s={mx:3,mb:3},d[8]=s):s=d[8],d[9]!==h?(l=(0,o.jsx)(eS.x,{portalContainerName:eo.E5,protectedOrgs:h,redirectURI:ez,sx:s}),d[9]=h,d[10]=l):l=d[10],d[11]!==u.currentTopic?(c=(0,o.jsx)(eB,{currentTopic:u.currentTopic}),d[11]=u.currentTopic,d[12]=c):c=d[12],d[13]!==r||d[14]!==l||d[15]!==c?(m=(0,o.jsx)(I.A,{sx:t,children:(0,o.jsxs)(I.A,{sx:a,children:[r,i,l,c]})}),d[13]=r,d[14]=l,d[15]=c,d[16]=m):m=d[16],m};function eB(e){let t,a,r=(0,n.c)(3),{currentTopic:i}=e;return(0,z.P)(i)?(r[0]===Symbol.for("react.memo_cache_sentinel")?(t={mt:3,mb:4},r[0]=t):t=r[0],r[1]!==i?(a=(0,o.jsx)(I.A,{sx:t,children:(0,o.jsx)(eD,{docset:i})}),r[1]=i,r[2]=a):a=r[2],a):null}function eD(e){let t,a,r,i,s,l,c,m,d,u,p,x,g=(0,n.c)(20),{docset:f}=e;return g[0]===Symbol.for("react.memo_cache_sentinel")?(t={display:"flex",flexDirection:"column",gap:3,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-large)",padding:3},g[0]=t):t=g[0],g[1]===Symbol.for("react.memo_cache_sentinel")?(a={display:"flex",alignItems:"baseline",gap:2},g[1]=a):a=g[1],g[2]!==f?(r=(0,o.jsx)(eC,{docset:f,size:24}),g[2]=f,g[3]=r):r=g[3],g[4]===Symbol.for("react.memo_cache_sentinel")?(i={fontSize:1,m:0},g[4]=i):i=g[4],g[5]!==f.name?(s=(0,o.jsx)(h.A,{as:"h3",sx:i,children:f.name}),g[5]=f.name,g[6]=s):s=g[6],g[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(B.A,{sx:{fontSize:0,color:"fg.muted"},children:"Knowledge base added to conversation"}),g[7]=l):l=g[7],g[8]!==r||g[9]!==s?(c=(0,o.jsxs)(I.A,{sx:a,children:[r,s," ",l]}),g[8]=r,g[9]=s,g[10]=c):c=g[10],g[11]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)(h.A,{as:"h4",sx:{fontSize:0,m:0,color:"fg.muted",fontWeight:"500"},children:"Repositories in this knowledge base"}),g[11]=m):m=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(d={display:"flex",flexWrap:"wrap",gap:3},g[12]=d):d=g[12],g[13]!==f.repos?(u=f.repos.map(eP),g[13]=f.repos,g[14]=u):u=g[14],g[15]!==u?(p=(0,o.jsx)(I.A,{sx:d,children:u}),g[15]=u,g[16]=p):p=g[16],g[17]!==p||g[18]!==c?(x=(0,o.jsxs)(I.A,{sx:t,children:[c,m,p]}),g[17]=p,g[18]=c,g[19]=x):x=g[19],x}function eP(e){return(0,o.jsxs)(I.A,{sx:{whiteSpace:"nowrap"},children:[(0,o.jsx)(l.RepoIcon,{}),` ${e}`]},e)}try{eI.displayName||(eI.displayName="TopicPicker")}catch{}try{eB.displayName||(eB.displayName="TopicDescription")}catch{}try{eD.displayName||(eD.displayName="DocsetDescription")}catch{}function eM(e){return e.login}function ez(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}let eL=e=>{let t,a,r,i,s=(0,n.c)(14),{disableTopicPicker:l,inputRef:c,showQuotaExceededEmptyState:m}=e,d=(0,$.Pk)(),{isWaitingOnCopilot:u,showTopicPicker:h,streamingMessage:p}=d,{scrollToBottom:x}=(0,V.b)(),{messages:g,groupedMessages:f}=(0,M.a)(d);return s[0]!==x?(t=()=>x("instant"),a=[x],s[0]=x,s[1]=t,s[2]=a):(t=s[1],a=s[2]),(0,E.N)(t,a),s[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("h2",{className:"sr-only",children:"Copilot Chat"}),s[3]=r):r=s[3],s[4]!==g||s[5]!==l||s[6]!==f||s[7]!==c||s[8]!==u||s[9]!==m||s[10]!==h||s[11]!==d||s[12]!==p?(i=(0,o.jsxs)(o.Fragment,{children:[r,m?(0,o.jsx)(ex,{}):h&&!l?(0,o.jsx)(eI,{}):(0,o.jsx)(I.A,{sx:{display:"flex",flexDirection:"column",minHeight:"0",flexGrow:1},children:(0,o.jsxs)(I.A,{className:"copilot-messages-container",sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[0===g.length&&(0,o.jsx)("p",{className:H.legalText,children:(0,o.jsx)(er.h,{})}),f.map((e,t)=>(0,o.jsx)(Y.i,{isLastGroup:t===f.length-1,children:e.map((a,r)=>{let n=t===f.length-1&&r===e.length-1;return(a===p||a.id===W.Wp||!eW(a)||!U.W.dotcomChatClientSideSkills||a.error||e$(a,n,d))&&(0,o.jsx)(K.c,{isLatestMessage:n,isFirstReply:1===g.length,isStreaming:a.id===p?.id||n&&u,message:a,inputRef:c},r)})},t)),d.clientSkillConfirmation&&U.W.dotcomChatClientSideSkills&&(0,o.jsx)("div",{className:"m-3",children:(0,o.jsx)(X.m,{confirmation:d.clientSkillConfirmation,handleConfirmation:e=>d.clientSkillConfirmation?.onSubmit?.("accepted"===e.state),isLatestMessage:!0})})]})})]}),s[4]=g,s[5]=l,s[6]=f,s[7]=c,s[8]=u,s[9]=m,s[10]=h,s[11]=d,s[12]=p,s[13]=i):i=s[13],i},eW=e=>!e.content&&(!e.confirmations||0===e.confirmations.length)&&(!e.clientConfirmations||0===e.clientConfirmations.length),eU=e=>e.clientSkillsRequests&&e.clientSkillsRequests.length>0||e.clientToolResults&&e.clientToolResults.length>0,e$=(e,t,a)=>eU(e)&&t&&!a.streamingMessage&&!a.clientSkillConfirmation,eF=()=>{let e,t,a,r=(0,n.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e={m:"auto",display:"flex",flexDirection:"column",alignItems:"center",height:"100%",justifyContent:"center"},t=(0,o.jsx)(m.A,{size:"large"}),r[0]=e,r[1]=t):(e=r[0],t=r[1]),r[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsxs)(I.A,{sx:e,children:[t,(0,o.jsx)(I.A,{sx:{p:3,color:"fg.subtle"},children:"Loading conversation\u2026"})]}),r[2]=a):a=r[2],a},eG=()=>{let e,t,a,r,i=(0,n.c)(8),{mode:s,reviewLab:c}=(0,$.Pk)(),m="immersive"===s?3:2;return i[0]!==m?(e={display:"flex",gap:"2",alignItems:"center",py:3,pr:3,pl:m,color:"fg.subtle"},i[0]=m,i[1]=e):e=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(D.A,{icon:l.AlertIcon}),i[2]=t):t=i[2],i[3]!==c?(a=c&&(0,o.jsx)(o.Fragment,{children:"\xa0You are in a review lab. Please check that you are connected to the Developer VPN."}),i[3]=c,i[4]=a):a=i[4],i[5]!==e||i[6]!==a?(r=(0,o.jsxs)(I.A,{sx:e,children:[t,"Failed to load previous messages.",a]}),i[5]=e,i[6]=a,i[7]=r):r=i[7],r},eO=({inputRef:e})=>{let t=(0,$.Pk)(),a=(0,F.b)(),{currentReferences:r,messagesLoading:n,messagesRestored:i,threadsLoading:s,currentTopic:l,messages:c,mode:m,selectedThreadID:d,showTopicPicker:u,context:h}=t,p=(0,G.W)(t),x=(0,C.useMemo)(()=>(0,z.k4)(Object.keys(Q.Pe)).slice(0,4).map(e=>({heading:e,content:(0,z.k4)(Q.Pe[e])[0]})),[]),{textAreaRef:g}=(0,P.Y)(e),{chatQuotaExceeded:f,isLicensedLimited:y,reloadQuota:_}=(0,en.xR)(),{ambientError:b}=(0,$.Pk)(),[j,S]=(0,C.useState)(!0),[v,N]=(0,C.useState)("chat"),w=(0,k.G7)("copilot_metadata_poc"),E=!!h&&h[0]&&("file"===h[0].type||"file-v2"===h[0].type),B=(0,O.GF)(t.availableModels);(0,C.useEffect)(()=>{if(!d||"assistive"===m)return;let e=`${z.Jz}/c/${d}`;window.location.pathname!==e&&0!==c.length&&(0,R.kd)(e)},[d,m,c.length]);let D=(0,C.useCallback)(async e=>{""!==e.trim()&&(_("user_submit"),await a.sendChatMessage({thread:p,content:e,references:r,topic:l,context:h,customInstructions:t.customInstructions,skillOptions:t.skillOptions,model:B}))},[_,a,p,r,l,h,t.customInstructions,t.skillOptions,B]),M=i&&c.length>0,W="loading"===n.state&&t.selectedThreadID&&!u&&!M,U="error"===n.state||"error"===s.state,H="loaded"===n.state||M,K=f&&(u||!p),[Y]=(0,C.useState)(t.renderAttachKnowledgeBaseHerePopover),X=(0,L.B)(c),Z=!!(!W&&!t.currentTopic&&!u&&0===X.length&&!Y&&0===r.length);return(0,o.jsxs)(o.Fragment,{children:[w&&E&&(0,o.jsx)(A,{fileContext:h[0],loading:j,setLoading:S,currentTab:v,setCurrentTab:N,makeCAPIRequest:z.p}),(!w||!!w&&"chat"===v)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(V.$,{className:"copilot-chat-messages",style:{flex:"1 1 auto"},children:[W&&(0,o.jsx)(eF,{}),U&&(0,o.jsx)(eG,{}),H&&!W&&(0,o.jsx)(eL,{inputRef:g,showQuotaExceededEmptyState:K}),(0,o.jsx)(eo.Cb,{})]}),Z&&(0,o.jsx)(I.A,{className:"copilot-chat-messages",sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,px:3,mb:3,scrollbarGutter:"stable"},children:x.map((e,r)=>(0,o.jsx)(eQ,{heading:e.heading,content:e.content,onSubmit:()=>{a.sendChatMessage({thread:(0,G.W)(t),content:e.content,references:t.currentReferences,topic:t.currentTopic,context:t.context}),(0,T.BI)("copilot_chat_suggestion_click",{topic:t.currentTopic?.name})}},r))}),!W&&!u&&!K&&(0,o.jsx)(I.A,{className:"copilot-chat-input copilot-chat-input-outer",sx:{display:"flex",flexDirection:"column",mt:"auto",px:3,pb:3,zIndex:1},children:f?(0,o.jsx)(ed,{}):(0,o.jsxs)(o.Fragment,{children:[!Z&&0===X.length&&!t.showTopicPicker&&(0,o.jsx)(ea,{suggestionKind:"initial"}),(0,o.jsxs)("div",{children:[y&&(0,o.jsx)(e_,{}),b&&(0,o.jsx)(J.P,{ambientError:b}),(0,o.jsx)(q.V,{textAreaRef:g,onSubmit:D,isStreaming:!!t.streamingMessage,size:"small"},d)]})]})})]}),(0,o.jsx)(eo.zc,{})]})};function eQ(e){let t,a,r,i,s,l,c=(0,n.c)(11),{heading:m,content:u,onSubmit:p}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t={bg:"canvas.default",height:"auto",minWidth:"auto",borderBottom:"1px solid",borderColor:"border.default",border:"1px solid var(--borderColor-default, var(--color-border-default))",flex:"1 1 49%",display:"flex",flexDirection:"column",justifyContent:"center",p:2},c[0]=t):t=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(a={textAlign:"center",fontSize:1,m:0,mb:1,wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},c[1]=a):a=c[1],c[2]!==m?(r=(0,o.jsx)(h.A,{as:"h3",sx:a,children:m}),c[2]=m,c[3]=r):r=c[3],c[4]===Symbol.for("react.memo_cache_sentinel")?(i={fontSize:0,fontWeight:400,textAlign:"center",color:"fg.muted",m:0,textWrap:"balance",wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},c[4]=i):i=c[4],c[5]!==u?(s=(0,o.jsx)(B.A,{as:"p",sx:i,children:u}),c[5]=u,c[6]=s):s=c[6],c[7]!==p||c[8]!==r||c[9]!==s?(l=(0,o.jsxs)(d.Q,{sx:t,onClick:p,children:[r,s]}),c[7]=p,c[8]=r,c[9]=s,c[10]=l):l=c[10],l}try{eL.displayName||(eL.displayName="Messages")}catch{}try{eF.displayName||(eF.displayName="Loading")}catch{}try{eG.displayName||(eG.displayName="Error")}catch{}try{eO.displayName||(eO.displayName="Chat")}catch{}try{eQ.displayName||(eQ.displayName="SuggestedPrompt")}catch{}},41039:(e,t,a)=>{a.d(t,{v:()=>d});var r,o=a(74848),n=a(55463),i=a(87330),s=a(94977),l=a(96540);let c=e=>` ${e.split(" ").map(e=>`<${e.replaceAll("Mod",(0,n.U0)()?"Cmd":"Ctrl").replaceAll("Command","Cmd").replaceAll("Control","Ctrl").toLowerCase()}>`).join(" / ")}`,m=e=>e.replaceAll("{CMD_CTRL}",(0,n.U0)()?"Command":"Control"),d=(0,l.forwardRef)(({label:e,hideTooltip:t,icon:a,shortcut:r,sx:n,tooltipDirection:d,...u},h)=>{let p=(0,l.useCallback)(()=>{let n={display:"flex"};return d?.includes("w")&&(n={...n,pl:2,ml:-2}),d?.includes("e")&&(n={...n,pr:2,mr:-2}),d?.includes("s")&&(n={...n,pb:2,mb:-2}),(d?.includes("n")||!d)&&(n={...n,pt:2,mt:-2}),t?(0,o.jsx)(a,{}):(0,o.jsx)(s.A,{"aria-label":`${e}${r?c(r):""}`,className:"icon-button-with-tooltip__tooltip",direction:d,sx:n,children:(0,o.jsx)(a,{})})},[t,e,r,d,a]);return(0,o.jsx)(i.K,{unsafeDisableTooltip:!0,ref:h,icon:p,"aria-keyshortcuts":r?m(r):void 0,sx:{...n,"&:focus-visible, &:hover":{"& .icon-button-with-tooltip__tooltip":{"&::after, &::before":{display:"inline-block",textDecoration:"none",animationName:"tooltip-appear",animationDuration:"0.1s",animationFillMode:"forwards",animationTimingFunction:"ease-in"}}},"&:hover .icon-button-with-tooltip__tooltip":{"&::after, &::before":{animationDelay:"0.4s"}}},...u,"aria-label":e})});d.displayName="IconButtonWithTooltip";try{(r=TooltippedIcon).displayName||(r.displayName="TooltippedIcon")}catch{}}}]);
//# sourceMappingURL=ui_packages_copilot-chat_components_Chat_tsx-ui_packages_icon-button-with-tooltip_IconButtonW-1ba5d9-94cf23e848c4.js.map